<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" href="/en/github.css" type="text/css" />
</head>
<body>
<h1 id="access-control-model">Access control model</h1>
<h2 id="overview">Overview</h2>
<p>Access control to the access subject by ACL is done by applying WebDAV ACL to role based access control.</p>
<p>By setting the ACL with the ACL method for Cell, Box, Collection, etc., access right to that resource can be set.</p>
<p>Basically, it conforms to the specification of WebDAV ACL, but this page will explain Personium original specifications.</p>
<p>ACL settings are defined in XML.</p>
<h2 id="acl">ACL</h2>
<p>The access control to the access subject by the ACL is done by applying <a href="http://www.ietf.org/rfc/rfc3744">WebDAV ACL</a> to role based access control.</p>
<p>By setting the ACL with the ACL method for Cell, Box, Collection, etc., access right to that resource can be set.</p>
<p>Basically, it conforms to the specification of WebDAV ACL, but this page will explain Personium original specifications.</p>
<p>ACL settings are defined in XML.</p>
<ul>
<li><h3 id="acl-component-in-personium">ACL component in Personium</h3></li>
<li><p>The Personium ACL consists of the following elements.</p></li>
<li><table>
<thead>
<tr class="header">
<th align="left">Element name</th>
<th align="left">Contents</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ace</td>
<td align="left">Represents an access entity that sets ACLs and a set of their grants</td>
</tr>
<tr class="even">
<td align="left">pricipal</td>
<td align="left">Define the access subject of the ACL to be set up</td>
</tr>
<tr class="odd">
<td align="left">grant</td>
<td align="left">Define one or more privileges to be given to principal</td>
</tr>
<tr class="even">
<td align="left">privilege</td>
<td align="left">Define permission settings</td>
</tr>
</tbody>
</table>
<h3 id="limitations">Limitations</h3>
<p>In Personium V1 series, there are the following restrictions.</p>
<ul>
<li><p>The ACL is updated by overwriting the existing setting</p></li>
<li><p>Set up deprivation of authority by deny element</p></li>
<li><p>Acquire a list of authorizations that can be granted</p></li>
</ul>
<h3 id="object">Object</h3>
<p>The target of ACL setting of Personium is a resource, and it is set by the ACL method to the URL of each resource.</p>
<p>In the case of a path of a cell, it becomes a cell level ACL, and in case of a path under a box, it becomes a box level ACL.</p>
<p>These two have different Privileges (authorities) that can be set, and they will not affect each other.</p>
<table style="width:17%;">
<colgroup>
<col width="5%" />
<col width="5%" />
<col width="5%" />
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">Object</th>
<th align="left">Target resource</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Cell Level ACL</td>
<td align="left">Setting to the cell, <br>Control CRUD of cell control object</td>
<td align="left">Cell</td>
</tr>
<tr class="even">
<td align="left">Box Level ACL</td>
<td align="left">Control CRUD of Box control object</td>
<td align="left">Box, WebDAV collection, ODatacollection, Servicecollection <br>Directory and file under the WebDAV collection</td>
</tr>
</tbody>
</table></li>
</ul>
<h2 id="ace">ace</h2>
<p>The target access agent is defined as a Principal element, and the authorization is defined as a grant element. You can set multiple ace elements.</p>
<ul>
<li><h3 id="principal">Principal</h3>
<p>Although Principal has &quot;human or computational actor&quot; in the WebDAV ACL, it is defined as a role in Personium.</p>
<p>The role of Personium is a concept close to &quot;Group&quot; in WebDAV ACL.</p>
<h3 id="all">(1) all</h3>
<p>As defined in the WebDAV ACL, setting the all element in pricipal gives the authorization setting,<br />
It can also be defined for all roles and unauthorized access agents (without Authorization header).</p>
<p>Since it is authority for all access agents to the resource, caution is required when using it.</p>
<pre><code>principal:all
privilege:all</code></pre>
<p>With the above setting, all operations are released to all accesses accessed.</p>
<p><strong>However, if schema authentication level setting is done, that checking will take effect. </strong></p>
<h4 id="setting-example">Setting example</h4>
<p>Give read access to all access subjects.</p>
<pre><code> &lt;D:acl xmlns:D=&quot;DAV:&quot; xml:base=&quot;http://fqdn/testcell1/__role/box1/&quot;

   xmlns:p=&quot;urn:x-personium:xmlns&quot;

   p:requireSchemaAuthz=&quot;none&quot;&gt;

   &lt;D:ace&gt;

     &lt;D:principal&gt;

       &lt;/D:all&gt;

     &lt;/D:principal&gt;

     &lt;D:grant&gt;

       &lt;D:privilege&gt;&lt;D:read/&gt;&lt;/D:privilege&gt;

     &lt;/D:grant&gt;

   &lt;/D:ace&gt;

 &lt;/D:acl&gt;</code></pre>
<h3 id="roll">(2) Roll</h3>
<p>To define a role for the target access agent, enclose it in an href element and set the role resource URL.<br />
For specifications on role resources see Role Issue.</p>
<p>Note that the role resource URL that can be set can not specify a role resource URL different from the cell URL of the ACL setting target.</p>
<h4 id="setting-example-1">Setting example</h4>
<p>・Describe all role resource URLs to be set in Principal</p>
<p>(Example of giving read and write privileges to doctor attached to box 1 and giving read only to guest attached to box 2)</p>
<pre><code> &lt;D:acl xmlns:D=&quot;DAV:&quot;

   xmlns:p=&quot;urn:x-personium:xmlns&quot;

   p:requireSchemaAuthz=&quot;none&quot;&gt;

   &lt;D:ace&gt;

     &lt;D:principal&gt;

       &lt;D:href&gt;http://fqdn/testcell1/__role/box1/doctor&lt;/D:href&gt;

     &lt;/D:principal&gt;

     &lt;D:grant&gt;

       &lt;D:privilege&gt;&lt;D:read/&gt;&lt;/D:privilege&gt;

       &lt;D:privilege&gt;&lt;D:write/&gt;&lt;/D:privilege&gt;

     &lt;/D:grant&gt;

   &lt;/D:ace&gt;

   &lt;D:ace&gt;

     &lt;D:principal&gt;

       &lt;D:href&gt;http://fqdn/testcell1/__role/box2/guest&lt;/D:href&gt;

     &lt;/D:principal&gt;

     &lt;D:grant&gt;

       &lt;D:privilege&gt;&lt;D:read/&gt;&lt;/D:privilege&gt;

     &lt;/D:grant&gt;

   &lt;/D:ace&gt;

 &lt;/D:acl&gt;
</code></pre>
<p>・Omission of description by xml: base</p>
<p>By describing the role resource URL up to the box in the xml: base attribute of the acl element, omit the description of the role resource URL set in Principal can do.</p>
<p>(Example of giving read and write privileges to doctor attached to box 1 and giving read only to guest attached to box 2)</p>
<pre><code> &lt;D:acl xmlns:D=&quot;DAV:&quot; xml:base=&quot;http://fqdn/testcell1/__role/box1/&quot;

   xmlns:p=&quot;urn:x-personium:xmlns&quot;

   p:requireSchemaAuthz=&quot;none&quot;&gt;

   &lt;D:ace&gt;

     &lt;D:principal&gt;

       &lt;D:href&gt;doctor&lt;/D:href&gt;

     &lt;/D:principal&gt;

     &lt;D:grant&gt;

       &lt;D:privilege&gt;&lt;D:read/&gt;&lt;/D:privilege&gt;

       &lt;D:privilege&gt;&lt;D:write/&gt;&lt;/D:privilege&gt;

     &lt;/D:grant&gt;

   &lt;/D:ace&gt;

   &lt;D:ace&gt;

     &lt;D:principal&gt;

       &lt;D:href&gt;../box2/guest&lt;/D:href&gt;

     &lt;/D:principal&gt;

     &lt;D:grant&gt;

       &lt;D:privilege&gt;&lt;D:read/&gt;&lt;/D:privilege&gt;

     &lt;/D:grant&gt;

   &lt;/D:ace&gt;

 &lt;/D:acl&gt;</code></pre>
<p>* Like guest, when setting a role attached to a box different from the xml: base box, it is possible to describe relative paths as described above.</p>
<h4 id="output-with-propfind">Output with PROPFIND</h4>
<p>When outputting the ACL setting with PROPFIND, the xml: base attribute is output as follows.</p>
<ul>
<li>In the case of PROPFIND to a cell, the URL of the main box</li>
<li>In the case of PROPFIND under Box, the URL to that Box</li>
</ul></li>
</ul>
<h2 id="grantprivilege">grant/Privilege</h2>
<p>The authority is set with the element defined by Personium, and set by enclosing it in the Privilege element in the grant element.<br />
In addition, you can specify multiple Privilege elements in the grant element.</p>
<ul>
<li><h3 id="cell-level-acl-privilege">Cell Level ACL Privilege</h3>
<p>For the set cell, specify execution authority of the cell control object and execution authority of the method.<br />
When the authority located at the higher level is set, it has the authority belonging to the lower rank. (Eg message has the authority of message-read)</p>
<table style="width:22%;">
<colgroup>
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Authority name</th>
<th align="left">Target cell control object</th>
<th align="left">Top authority name</th>
<th align="left">Methods that can be executed</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">root</td>
<td align="left">It has all the authorities below</td>
<td align="left">-</td>
<td align="left">All</td>
</tr>
<tr class="even">
<td align="left">auth</td>
<td align="left">Account, Role, ExtRole</td>
<td align="left">root</td>
<td align="left">PUT, POST, DELETE, GET, OPTIONS</td>
</tr>
<tr class="odd">
<td align="left">auth-read</td>
<td align="left">Account, Role, ExtRole</td>
<td align="left">auth</td>
<td align="left">GET, OPTIONS</td>
</tr>
<tr class="even">
<td align="left">message</td>
<td align="left">RecievedMessage, SentMessage</td>
<td align="left">root</td>
<td align="left">POST, DELETE, GET, OPTIONS</td>
</tr>
<tr class="odd">
<td align="left">message-read</td>
<td align="left">RecievedMessage, SentMessage</td>
<td align="left">message</td>
<td align="left">GET, OPTIONS</td>
</tr>
<tr class="even">
<td align="left">event</td>
<td align="left">event</td>
<td align="left">root</td>
<td align="left">PUT, POST, DELETE, GET, OPTIONS</td>
</tr>
<tr class="odd">
<td align="left">event-read</td>
<td align="left">event</td>
<td align="left">event</td>
<td align="left">GET, OPTIONS</td>
</tr>
<tr class="even">
<td align="left">log</td>
<td align="left">log</td>
<td align="left">root</td>
<td align="left">PUT, POST, DELETE, GET, OPTIONS</td>
</tr>
<tr class="odd">
<td align="left">log-read</td>
<td align="left">log</td>
<td align="left">log</td>
<td align="left">GET, OPTIONS</td>
</tr>
<tr class="even">
<td align="left">social</td>
<td align="left">Relation, ExtCell</td>
<td align="left">root</td>
<td align="left">PUT, POST, DELETE, GET, OPTIONS</td>
</tr>
<tr class="odd">
<td align="left">social-read</td>
<td align="left">Relation, ExtCell</td>
<td align="left">social</td>
<td align="left">GET, OPTIONS</td>
</tr>
<tr class="even">
<td align="left">box</td>
<td align="left">Box</td>
<td align="left">root</td>
<td align="left">PUT, POST, DELETE, GET, OPTIONS</td>
</tr>
<tr class="odd">
<td align="left">box-read</td>
<td align="left">Box</td>
<td align="left">box</td>
<td align="left">GET, OPTIONS</td>
</tr>
<tr class="even">
<td align="left">box-install</td>
<td align="left">Box</td>
<td align="left">box</td>
<td align="left">MKCOL(Barfileinstallation)</td>
</tr>
<tr class="odd">
<td align="left">box-export</td>
<td align="left">Box</td>
<td align="left">root</td>
<td align="left">GET(Barfileexport) * Not supported</td>
</tr>
<tr class="even">
<td align="left">acl</td>
<td align="left">Cell</td>
<td align="left">root</td>
<td align="left">ACL</td>
</tr>
<tr class="odd">
<td align="left">acl-read</td>
<td align="left">Cell</td>
<td align="left">acl</td>
<td align="left">Display of ACL setting of PROPFIND</td>
</tr>
<tr class="even">
<td align="left">propfind</td>
<td align="left">Cell</td>
<td align="left">root</td>
<td align="left">PROPFIND</td>
</tr>
</tbody>
</table>
<h4 id="setting-example-2">Setting Example</h4>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"> <span class="op">&lt;</span><span class="ex">?xml</span> version=<span class="st">&quot;1.0&quot;</span> encoding=<span class="st">&quot;utf-8&quot;</span> ?<span class="op">&gt;</span>

 <span class="op">&lt;</span><span class="ex">D</span>:acl xmlns:D=<span class="st">&quot;DAV:&quot;</span> xmlns:p=<span class="st">&quot;urn:x-personium:xmlns&quot;</span> xml:base=<span class="st">&quot;https://example.com/cell/box&quot;</span><span class="op">&gt;</span>

  <span class="op">&lt;</span><span class="ex">D</span>:ace<span class="op">&gt;</span>

    <span class="op">&lt;</span><span class="ex">D</span>:principal<span class="op">&gt;</span>

      <span class="op">&lt;</span><span class="ex">D</span>:href<span class="op">&gt;</span>role10<span class="op">&lt;</span>/D:href<span class="op">&gt;</span>

    <span class="op">&lt;</span>/D:<span class="ex">principal</span><span class="op">&gt;</span>

    <span class="op">&lt;</span><span class="ex">D</span>:grant<span class="op">&gt;</span>

      <span class="op">&lt;</span><span class="ex">D</span>:privilege<span class="op">&gt;&lt;</span>p:root/<span class="op">&gt;&lt;</span>/D:privilege<span class="op">&gt;</span>

    <span class="op">&lt;</span>/D:<span class="ex">grant</span><span class="op">&gt;</span>

  <span class="op">&lt;</span>/D:<span class="ex">ace</span><span class="op">&gt;</span>

  <span class="op">&lt;</span><span class="ex">D</span>:ace<span class="op">&gt;</span>

    <span class="op">&lt;</span><span class="ex">D</span>:principal<span class="op">&gt;</span>

      <span class="op">&lt;</span><span class="ex">D</span>:href<span class="op">&gt;</span>../box2/role13<span class="op">&lt;</span>/D:href<span class="op">&gt;</span>

    <span class="op">&lt;</span>/D:<span class="ex">principal</span><span class="op">&gt;</span>

    <span class="op">&lt;</span><span class="ex">D</span>:grant<span class="op">&gt;</span>

      <span class="op">&lt;</span><span class="ex">D</span>:privilege<span class="op">&gt;&lt;</span>p:social/<span class="op">&gt;&lt;</span>/D:privilege<span class="op">&gt;</span>

    <span class="op">&lt;</span>/D:<span class="ex">grant</span><span class="op">&gt;</span>

  <span class="op">&lt;</span>/D:<span class="ex">ace</span><span class="op">&gt;</span>

  <span class="op">&lt;</span><span class="ex">D</span>:ace<span class="op">&gt;</span>

    <span class="op">&lt;</span><span class="ex">D</span>:principal<span class="op">&gt;</span>

       <span class="op">&lt;</span><span class="ex">D</span>:href<span class="op">&gt;</span>role15<span class="op">&lt;</span>/D:href<span class="op">&gt;</span>

    <span class="op">&lt;</span>/D:<span class="ex">principal</span><span class="op">&gt;</span>

    <span class="op">&lt;</span><span class="ex">D</span>:grant<span class="op">&gt;</span>

      <span class="op">&lt;</span><span class="ex">D</span>:privilege<span class="op">&gt;&lt;</span>p:acl/<span class="op">&gt;&lt;</span>/D:privilege<span class="op">&gt;</span>

    <span class="op">&lt;</span>/D:<span class="ex">grant</span><span class="op">&gt;</span>

  <span class="op">&lt;</span>/D:<span class="ex">ace</span><span class="op">&gt;</span>

 <span class="op">&lt;</span>/D:<span class="ex">acl</span><span class="op">&gt;</span></code></pre></div>
<h3 id="box-level-acl-privilege">Box level ACL Privilege</h3>
<p>Specify the execution authority of the method for the resources below the set box.<br />
Box level Privilege is basically defined along WebDAV ACL.<br />
When the authority located at the higher level is set, it has the authority belonging to the lower rank.(Example: read also has the authority of read-properties)</p>
<table style="width:22%;">
<colgroup>
<col width="5%" />
<col width="5%" />
<col width="5%" />
<col width="5%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Authority name</th>
<th align="left">Target cell control object</th>
<th align="left">Top authority name</th>
<th align="left">Methods that can be executed</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">all</td>
<td align="left">It has all the authorities below</td>
<td align="left">p:root</td>
<td align="left">All</td>
</tr>
<tr class="even">
<td align="left">read</td>
<td align="left">Has read permission. It does not include read-acl.</td>
<td align="left">all</td>
<td align="left">GET, OPTIONS</td>
</tr>
<tr class="odd">
<td align="left">write</td>
<td align="left">Has write authority. It does not include write-acl.</td>
<td align="left">all</td>
<td align="left">PUT, POST, DELETE, MKCOL</td>
</tr>
<tr class="even">
<td align="left">read-properties</td>
<td align="left">Has the right to read properties.</td>
<td align="left">read</td>
<td align="left">PROPFIND</td>
</tr>
<tr class="odd">
<td align="left">write-properties</td>
<td align="left">Have authority to write properties.</td>
<td align="left">write</td>
<td align="left">PROPPATCH</td>
</tr>
<tr class="even">
<td align="left">read-acl</td>
<td align="left">It has read authority of ACL.</td>
<td align="left">all</td>
<td align="left">Display of ACL setting of PROPFIND</td>
</tr>
<tr class="odd">
<td align="left">write-acl</td>
<td align="left">Has authority to write ACL.</td>
<td align="left">all</td>
<td align="left">ACL</td>
</tr>
<tr class="even">
<td align="left">write-content</td>
<td align="left">Has authority to write content.</td>
<td align="left">write</td>
<td align="left">*Notsupported</td>
</tr>
<tr class="odd">
<td align="left">bind</td>
<td align="left">Has bind authority.</td>
<td align="left">write</td>
<td align="left">*Notsupported</td>
</tr>
<tr class="even">
<td align="left">unbind</td>
<td align="left">Has unbind authority.</td>
<td align="left">write</td>
<td align="left">*Notsupported</td>
</tr>
<tr class="odd">
<td align="left">exec</td>
<td align="left">Has service execution authority. * Personium original implementation</td>
<td align="left">all</td>
<td align="left">-</td>
</tr>
</tbody>
</table>
<h4 id="setting-example-3">Setting Example</h4>
<pre><code> &lt;D:acl xmlns:D=&quot;DAV:&quot; xml:base=&quot;http://fqdn/testcell1/__role/box1/&quot;

    xmlns:p=&quot;urn:x-personium:xmlns&quot;

    p:requireSchemaAuthz=&quot;none&quot;&gt;

    &lt;D:ace&gt;

      &lt;D:principal&gt;

        &lt;D:href&gt;doctor&lt;/D:href&gt;

      &lt;/D:principal&gt;

      &lt;D:grant&gt;

        &lt;D:privilege&gt;&lt;D:read/&gt;&lt;/D:privilege&gt;

        &lt;D:privilege&gt;&lt;D:write/&gt;&lt;/D:privilege&gt;

      &lt;/D:grant&gt;

    &lt;/D:ace&gt;

    &lt;D:ace&gt;

      &lt;D:principal&gt;

        &lt;D:href&gt;../box2/guest&lt;/D:href&gt;

      &lt;/D:principal&gt;

      &lt;D:grant&gt;

        &lt;D:privilege&gt;&lt;D:read/&gt;&lt;/D:privilege&gt;

      &lt;/D:grant&gt;

    &lt;/D:ace&gt;

  &lt;/D:acl&gt;</code></pre>
<h3 id="acl-inheritance">ACL inheritance</h3>
<p>For box level ACL setting, the setting of the parent (upper directory) of the accessed resource is applied back to the cell.</p>
<p>The ACL setting for the access subject is inherited in the form in which the parent setting is added.</p>
<p>Therefore, the following points need to be noted when setting ACL.</p>
<ul>
<li>When strong permission of all etc. etc is set for parent, even if restriction is applied to child, it becomes invalid</li>
</ul>
<h4 id="examples-of-acl-inheritance-and-applied-privileges">Examples of ACL inheritance and applied privileges</h4>
<p>Exampleresource</p>
<table>
<thead>
<tr class="header">
<th align="left">Resource type</th>
<th align="left">Resource name</th>
<th align="left">Resource URL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Cell</td>
<td align="left">cell</td>
<td align="left">https://fqdn/cell</td>
</tr>
<tr class="even">
<td align="left">Box</td>
<td align="left">box</td>
<td align="left">https://fqdn/cell/box</td>
</tr>
<tr class="odd">
<td align="left">WebDAV Collection</td>
<td align="left">webdav</td>
<td align="left">https://fqdn/cell/box/webdav</td>
</tr>
<tr class="even">
<td align="left">Directory</td>
<td align="left">directory</td>
<td align="left">https://fqdn/cell/box/webdav/directory</td>
</tr>
<tr class="odd">
<td align="left">File</td>
<td align="left">file</td>
<td align="left">https://fqdn/cell/box/webdav/directory/file</td>
</tr>
</tbody>
</table>
<p>After applying the following ACL setting to the above resource, the authorities applied when accessing each resource are as follows.</p>
<table>
<thead>
<tr class="header">
<th align="left">Resources to access</th>
<th align="left">Permission set</th>
<th align="left">Applicable authority</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Cell</td>
<td align="left">auth-read</td>
<td align="left">auth-read</td>
</tr>
<tr class="even">
<td align="left">Box</td>
<td align="left">read-acl</td>
<td align="left">auth-read, read-acl</td>
</tr>
<tr class="odd">
<td align="left">WebDAV Collection</td>
<td align="left">read</td>
<td align="left">auth-read, read-acl, read</td>
</tr>
<tr class="even">
<td align="left">Directory</td>
<td align="left">nosettings</td>
<td align="left">auth-read, read-acl, read</td>
</tr>
<tr class="odd">
<td align="left">File</td>
<td align="left">read-propaties</td>
<td align="left">auth-read, read-acl, read-properties, read</td>
</tr>
</tbody>
</table></li>
</ul>
<h2 id="schema-authority-request-level">Schema authority request level</h2>
<p>For access control to the application according to the schema authority request level,</p>
<p>the request level is set by the RequireSchemaAuthz attribute of the ACL element at the time of setting the ACL.</p>
<p>For schema authentication specifications, see &quot;Schema authentication (application authentication)&quot; in the authentication model.</p>
<ul>
<li><h3 id="setting-value">Setting value</h3>
<p>Schema privilege request level value</p>
<table style="width:11%;">
<colgroup>
<col width="5%" />
<col width="5%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Level value</th>
<th align="left">Contents</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">none(Default)</td>
<td align="left">Accessible without schema authentication</td>
</tr>
<tr class="even">
<td align="left">public</td>
<td align="left">Accessible if schema authentication result is OK</td>
</tr>
<tr class="odd">
<td align="left">confidential</td>
<td align="left">When the schema authentication result is OK and the special role confidentialClient is available</td>
</tr>
</tbody>
</table>
<h4 id="setting-example-4">Setting Example</h4>
<p>Sample Schema Privilege Request Level Setting ACL</p>
<pre><code>  &lt;D:acl xmlns:D=&quot;DAV:&quot; xml:base=&quot;http://localhost:8080/testcell1/__role/box1/&quot;

    xmlns:p=&quot;urn:x-personium:xmlns&quot;

    p:requireSchemaAuthz=&quot;{Level value}&quot;&gt;

    &lt;D:ace&gt;

      &lt;D:principal&gt;

        &lt;D:all/&gt;

      &lt;/D:principal&gt;

      &lt;D:grant&gt;

        &lt;D:privilege&gt;&lt;D:read/&gt;&lt;/D:privilege&gt;

        &lt;D:privilege&gt;&lt;D:write/&gt;&lt;/D:privilege&gt;

      &lt;/D:grant&gt;

    &lt;/D:ace&gt;

  &lt;/D:acl&gt;</code></pre>
<h3 id="inheritance-of-schema-authority-request-level-setting">Inheritance of schema authority request level setting</h3>
<p>The schema authority request level setting is applied by setting the parent (upper directory) of the accessed resource back to the box only when the accessed resource is not set.</p>
<ul>
<li>If the schema authority request level is not set, it is treated as none, but it is not inherited if explicitly set to none.</li>
<li>Inheritance is confirmed back to the Box, but when the schema level setting is performed on the intermediate resource, the setting value becomes effective.</li>
</ul>
<h4 id="schema-privilege-request-level-inheritance-and-example-of-authority-to-be-applied">Schema privilege Request level inheritance and example of authority to be applied</h4>
<p>The schema authority request level applied when accessing each resource after setting the following schema authority request level to the above resource is as follows.</p>
<p>Example resource</p>
<table>
<thead>
<tr class="header">
<th align="left">Resource type</th>
<th align="left">Resource name</th>
<th align="left">Resource URL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Cell</td>
<td align="left">cell</td>
<td align="left">https://fqdn/cell</td>
</tr>
<tr class="even">
<td align="left">Box</td>
<td align="left">box</td>
<td align="left">https://fqdn/cell/box</td>
</tr>
<tr class="odd">
<td align="left">WebDAV Collection</td>
<td align="left">webdav</td>
<td align="left">https://fqdn/cell/box/webdav</td>
</tr>
<tr class="even">
<td align="left">Directory</td>
<td align="left">directory</td>
<td align="left">https://fqdn/cell/box/webdav/directory</td>
</tr>
<tr class="odd">
<td align="left">File</td>
<td align="left">file</td>
<td align="left">https://fqdn/cell/box/webdav/directory/file</td>
</tr>
</tbody>
</table>
<p>After applying the following ACL setting to the above resource, the authorities applied when accessing each resource are as follows.</p>
<table>
<thead>
<tr class="header">
<th align="left">Resources to access</th>
<th align="left">Set level</th>
<th align="left">Applicable level</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Box</td>
<td align="left">confidential</td>
<td align="left">confidential  </td>
</tr>
<tr class="even">
<td align="left">WebDAV Collection</td>
<td align="left">public</td>
<td align="left">public</td>
</tr>
<tr class="odd">
<td align="left">Directory</td>
<td align="left">no settings</td>
<td align="left">public</td>
</tr>
<tr class="even">
<td align="left">File</td>
<td align="left">none</td>
<td align="left">none</td>
</tr>
</tbody>
</table></li>
</ul>
</body>
</html>
